# Kanban 项目管理系统

一个功能完整的看板型项目管理工具，支持敏捷开发和传统项目管理模式，专注于任务管理、迭代规划和团队协作。

## 🚀 项目概述

本项目是一个基于 Node.js 的现代化项目管理系统，采用 Express 框架构建后端服务，使用 EJS 模板渲染技术提供前端界面，SQLite 作为数据存储解决方案。系统提供完整的项目管理功能，包括任务管理、迭代规划、看板视图、甘特图等，适合中小型团队的项目管理需求。

## 📸 界面预览

### 任务管理界面
- **列表视图**：紧凑的任务列表，支持快速筛选和排序
- **看板视图**：可视化的任务流程管理，支持拖拽操作
- **树形视图**：层级化的任务结构展示
- **甘特图**：时间线视图和依赖关系可视化

### 项目管理界面
- **项目仪表盘**：项目概览和关键指标
- **迭代管理**：迭代规划和进度跟踪
- **成员管理**：团队成员和权限管理

> 注：界面截图将在后续版本中添加

## 📋 核心功能

### 1. 组织与成员管理
- **组织管理**：创建、编辑、删除组织
- **成员管理**：邀请成员、角色分配、权限控制
- **团队协作**：成员间的协作和沟通
- **角色体系**：管理员、产品经理、开发者、测试、UI设计师、运维、客户等角色

### 2. 项目管理
- **项目创建**：支持多种项目类型和配置
- **项目成员**：灵活的成员管理和权限分配
- **项目设置**：自定义工作流、通知设置等
- **项目统计**：实时的项目进度和统计数据
- **项目切换**：支持多项目环境下的快速切换

### 3. 任务管理
- **任务类型**：史诗、用户故事、需求、开发任务、设计任务、测试任务、运维任务、Bug等
- **任务属性**：
  - 星级难度（1-5星）
  - 紧急程度（紧急、重要、普通、延后、冻结）
  - 任务状态（草稿、已发布、竞标中、已分配、进行中、审核中、已完成、已取消）
  - 预估工时和实际工时
  - 起始日期和截止日期
  - 负责人、参与人、审核人
- **任务关系**：支持父子任务层级结构
- **任务操作**：创建、编辑、删除、分配、状态变更

### 4. 迭代管理
- **迭代规划**：创建和管理项目迭代周期
- **迭代目标**：设定明确的迭代目标和验收标准
- **容量管理**：迭代容量规划和工时分配
- **进度跟踪**：实时跟踪迭代进度和燃尽图
- **迭代统计**：完成率、速度等关键指标

### 5. 多视图支持
- **列表视图**：传统的任务列表展示
- **看板视图**：可视化的任务流程管理
- **树形视图**：层级化的任务结构展示
- **甘特图**：时间线视图和依赖关系可视化

### 6. 看板功能
- **状态列**：自定义任务状态和工作流
- **拖拽操作**：直观的任务状态变更
- **筛选排序**：多维度的任务筛选和排序
- **快速操作**：看板中的快速编辑功能

### 7. 甘特图
- **时间线视图**：直观的项目时间规划
- **任务依赖**：任务间的依赖关系展示
- **进度跟踪**：实时进度更新和状态同步
- **时间粒度**：支持日、周、月等不同时间粒度

### 8. 统计与报表
- **仪表盘**：项目整体状况概览
- **工时统计**：团队和个人工时分析
- **进度报表**：项目和迭代进度跟踪
- **效率分析**：任务完成效率和质量分析

## 🛠 技术架构

### 后端技术栈
- **运行环境**：Node.js 18+
- **Web框架**：Express.js
- **数据库**：SQLite 3
- **ORM**：Sequelize
- **身份验证**：Passport.js (Local Strategy)
- **模板引擎**：EJS
- **文件上传**：Multer
- **日志管理**：Winston
- **任务调度**：node-cron
- **安全防护**：Helmet, CORS, Rate Limiting

### 前端技术栈
- **模板渲染**：EJS 服务端渲染
- **样式框架**：Bootstrap 5 + 自定义CSS
- **JavaScript库**：
  - jQuery（DOM操作和AJAX）
  - Font Awesome（图标库）
  - 自定义JS组件（甘特图、看板等）
- **交互特性**：
  - 响应式设计
  - 拖拽排序
  - 动态表单
  - 实时筛选

### 开发工具
- **代码规范**：ESLint + Prettier
- **测试框架**：Jest + Supertest
- **开发调试**：Nodemon
- **数据库管理**：Sequelize CLI

## 📁 项目结构

```
dungeon-kanban-quest/
├── src/
│   ├── app.js               # 应用入口文件
│   ├── config/              # 配置文件
│   │   ├── database.js      # 数据库配置
│   │   ├── config.js        # 应用配置
│   │   └── taskTypes.js     # 任务类型配置
│   ├── models/              # 数据模型
│   │   ├── index.js         # 模型索引和关联
│   │   ├── User.js          # 用户模型
│   │   ├── Organization.js  # 组织模型
│   │   ├── Project.js       # 项目模型
│   │   ├── BountyTask.js    # 任务模型
│   │   └── Sprint.js        # 迭代模型
│   ├── routes/              # 路由定义
│   │   ├── auth.js          # 认证路由
│   │   ├── tasks.js         # 任务路由
│   │   ├── projects.js      # 项目路由
│   │   ├── sprints.js       # 迭代路由
│   │   ├── organizations.js # 组织路由
│   │   ├── users.js         # 用户路由
│   │   └── pages.js         # 页面路由
│   ├── middleware/          # 中间件
│   ├── services/            # 业务逻辑服务
│   └── utils/               # 工具函数
├── views/                   # EJS模板文件
│   ├── auth/                # 认证相关页面
│   ├── dashboard/           # 仪表盘
│   ├── tasks/               # 任务管理页面
│   ├── projects/            # 项目管理页面
│   ├── sprints/             # 迭代管理页面
│   ├── organizations/       # 组织管理页面
│   ├── users/               # 用户管理页面
│   └── partials/            # 公共组件
├── public/                  # 静态资源
│   ├── css/                 # 样式文件
│   ├── js/                  # JavaScript文件
│   ├── images/              # 图片资源
│   └── uploads/             # 上传文件
├── database/                # 数据库文件
│   └── kanban.db           # SQLite数据库
├── scripts/                 # 脚本文件
│   └── init-db.js          # 数据库初始化脚本
├── tests/                   # 测试文件
├── logs/                    # 日志文件
├── package.json
└── README.md
```

## 🗄 数据库设计

### 核心表结构
- **users** - 用户表：存储用户基本信息、角色、状态等
- **organizations** - 组织表：组织信息和设置
- **organization_members** - 组织成员表：用户与组织的关联关系
- **projects** - 项目表：项目基本信息、类型、状态等
- **project_organizations** - 项目组织关联表
- **project_members** - 项目成员表：项目成员和角色权限
- **bounty_tasks** - 任务表：任务详细信息、状态、工时等
- **sprints** - 迭代表：迭代规划、时间范围、统计数据

### 主要字段说明
- **任务类型**：史诗、用户故事、需求、开发任务、设计任务、测试任务、运维任务、Bug
- **任务状态**：草稿、已发布、竞标中、已分配、进行中、审核中、已完成、已取消
- **用户角色**：管理员、产品经理、开发者、测试、UI设计师、运维、客户
- **紧急程度**：紧急、重要、普通、延后、冻结
- **星级难度**：1-5星评级系统

## 🔧 安装和运行

### 环境要求
- Node.js 18.0+
- npm 8.0+
- SQLite 3

### 快速开始
```bash
# 克隆项目
git clone <repository-url>
cd dungeon-kanban-quest

# 安装依赖
npm install

# 初始化数据库（包含示例数据）
npm run init

# 启动开发服务器
npm run dev
```

### 可用脚本
```bash
# 开发模式启动（热重载）
npm run dev

# 生产模式启动
npm start

# 初始化数据库和示例数据
npm run init

# 运行测试
npm test

# 代码格式化
npm run format

# 代码检查
npm run lint
```

### 默认账户
系统初始化后会创建以下默认账户：

**管理员账户**
- 用户名：admin
- 密码：admin123
- 角色：系统管理员

**示例用户**
- 产品经理：pm / pm123
- 开发者：dev / dev123
- 测试：tester / test123
- 设计师：designer / design123

### 访问地址
- 应用地址：http://localhost:3216
- 默认端口：3216

### 环境变量配置
创建 `.env` 文件（可参考 `.env.example`）：
```env
# 应用配置
NODE_ENV=development
PORT=3216
APP_NAME=Kanban项目管理系统

# 数据库配置
DB_PATH=./database/kanban.db

# 会话配置
SESSION_SECRET=your-session-secret

# 文件上传配置
UPLOAD_PATH=./public/uploads
MAX_FILE_SIZE=10485760
```

## ✨ 功能特性

### 任务管理特性
- **多层级任务**：支持史诗 → 故事 → 任务的层级结构
- **灵活工作流**：可自定义任务状态和流转规则
- **智能分配**：基于角色权限的任务分配机制
- **工时跟踪**：预估工时与实际工时对比分析
- **快速操作**：列表中直接编辑状态、负责人等字段

### 视图切换
- **列表视图**：紧凑的任务列表，支持快速筛选和排序
- **看板视图**：可视化的任务流程，支持拖拽操作
- **树形视图**：层级化展示，支持懒加载和折叠展开
- **甘特图**：时间线视图，支持依赖关系和进度跟踪

### 权限管理
- **角色体系**：管理员、产品经理、开发者、测试、设计师、运维、客户
- **项目权限**：基于项目成员的角色权限控制
- **操作权限**：创建、编辑、删除、分配等操作的细粒度控制
- **数据隔离**：项目级别的数据访问控制

### 协作功能
- **多人协作**：支持任务的负责人、参与人、审核人
- **状态同步**：实时的任务状态更新和通知
- **项目切换**：支持多项目环境下的快速切换
- **团队管理**：组织和项目的成员管理

## 🚀 开发计划

### 已完成功能 ✅
- [x] 用户认证和权限管理
- [x] 组织和项目管理
- [x] 任务的完整CRUD操作
- [x] 多种视图（列表、看板、树形、甘特图）
- [x] 迭代管理和规划
- [x] 基础的工时管理
- [x] 响应式界面设计

### 开发中功能
- [ ] 任务依赖关系管理
- [ ] 高级筛选和搜索
- [ ] 批量操作功能
- [ ] 数据导入导出

### 计划功能 📋
- [ ] 实时通知系统
- [ ] 文件附件管理
- [ ] 评论和讨论功能
- [ ] 高级报表和统计
- [ ] API接口开发
- [ ] 移动端适配优化

## 📖 使用指南

### 基本工作流程

1. **组织设置**
   - 创建组织并邀请成员
   - 设置成员角色和权限

2. **项目创建**
   - 创建项目并关联组织
   - 添加项目成员和分配角色
   - 配置项目设置和工作流

3. **迭代规划**
   - 创建迭代并设置目标
   - 规划迭代容量和时间范围

4. **任务管理**
   - 创建不同类型的任务
   - 分配负责人和设置优先级
   - 跟踪任务进度和工时

5. **多视图协作**
   - 使用看板进行可视化管理
   - 通过甘特图进行时间规划
   - 利用树形视图管理任务层级

### 最佳实践

- **任务拆分**：将大任务拆分为可管理的小任务
- **工时估算**：基于历史数据进行合理的工时估算
- **状态更新**：及时更新任务状态，保持信息同步
- **定期回顾**：定期进行迭代回顾和改进

## 🧪 测试

### 运行测试
```bash
# 运行所有测试
npm test

# 运行测试并监听变化
npm run test:watch
```

### 测试覆盖
- 模型层测试
- 路由层测试
- 中间件测试
- 集成测试

## 🤝 贡献指南

### 开发规范
- **代码风格**：使用 ESLint + Prettier 保持代码一致性
- **提交规范**：遵循 Conventional Commits 规范
- **分支策略**：使用 Git Flow 工作流
- **测试要求**：新功能需要包含相应的测试用例

### 参与方式
1. Fork 本项目
2. 创建功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 创建 Pull Request

### 问题反馈
- 使用 GitHub Issues 报告 Bug
- 提供详细的复现步骤和环境信息
- 建议新功能时请先讨论可行性

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 🙏 致谢

感谢所有为这个项目做出贡献的开发者和用户。

---

**项目状态**：本项目正在积极开发中，欢迎提交 Issue 和 Pull Request。如果您在使用过程中遇到问题或有改进建议，请随时联系我们。
